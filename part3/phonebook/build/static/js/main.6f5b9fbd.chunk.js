(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),a=t(3),o=t(2),i=t(4),u=t.n(i),s="/api/persons",d={getAll:function(){return u.a.get(s).then((function(e){return e.data}))},createPerson:function(e){return u.a.post(s,e).then((function(e){return e.data}))},deletePerson:function(e){return u.a.delete("".concat(s,"/").concat(e.id)).then((function(){return!0}))},updatePerson:function(e){return u.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))}},f=t(0);var j=function(e){var n=e.filter,t=e.onChange;return Object(f.jsxs)("div",{children:["filter shown with: ",Object(f.jsx)("input",{value:n,onChange:t})]})},l=t(7);var b=function(e){var n=e.persons,t=e.onSubmit,r=e.onUpdate,c=e.onClearError,i=Object(o.useState)(""),u=Object(a.a)(i,2),s=u[0],d=u[1],j=Object(o.useState)(""),b=Object(a.a)(j,2),h=b[0],m=b[1];return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.some((function(e){return e.name===s})),a=!1;if((c&&window.confirm("".concat(s," is already added to phonebook, replace the old number with the new one?"))||!c)&&(a=!0),a)if(d(""),m(""),c){var o=n.find((function(e){return e.name===s})),i=Object(l.a)(Object(l.a)({},o),{},{name:s,number:h});r(i)}else{t({name:s,number:h})}},children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:s,onChange:function(e){d(e.target.value),c()}})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:h,onChange:function(e){m(e.target.value),c()}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})};var h=function(e){var n=e.persons,t=e.filter,r=e.onDelete,c=n.filter((function(e){return e.name.includes(t)}));return Object(f.jsx)(f.Fragment,{children:c.map((function(e){return Object(f.jsxs)("p",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:(n=e,function(){window.confirm("Delete ".concat(n.name,"?"))&&r(n)}),children:"delete"})]},e.id);var n}))})};t(41);var m=function(e){var n=e.message;return n?Object(f.jsx)("div",{className:"error",children:n}):null},O=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),i=Object(a.a)(c,2),u=i[0],s=i[1],l=Object(o.useState)(""),O=Object(a.a)(l,2),p=O[0],v=O[1];Object(o.useEffect)((function(){d.getAll().then((function(e){r(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(m,{message:p}),Object(f.jsx)(j,{filter:u,onChange:function(e){return s(e.target.value)}}),Object(f.jsx)("h2",{children:"Add a new"}),Object(f.jsx)(b,{persons:t,onSubmit:function(e){d.createPerson(e).then((function(n){r(t.concat(n)),v("Added ".concat(e.name))})).catch((function(e){v(e.response.data.error)}))},onUpdate:function(e){d.updatePerson(e).then((function(n){r(t.map((function(e){return e.id!==n.id?e:n}))),v("Updated ".concat(e.name))})).catch((function(){alert("the person ".concat(e.name," was already deleted from server")),r(t.filter((function(n){return n.id!==e.id})))}))},onClearError:function(){return v("")}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(h,{filter:u,persons:t,onDelete:function(e){d.deletePerson(e).then((function(n){if(n){var c=t.filter((function(n){return n.id!==e.id}));r(c),v("Deleted ".concat(e.name))}else v("Information of ".concat(e.name," has already been removed from server"))})).catch((function(e){v(e.response.data.error)}))}})]})};c.a.render(Object(f.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.6f5b9fbd.chunk.js.map