(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),o=t(3),a=t(2),i=t(4),u=t.n(i),s="http://localhost:3001/api/persons",d={getAll:function(){return u.a.get(s).then((function(e){return e.data}))},createPerson:function(e){return u.a.post(s,e).then((function(e){return e.data}))},deletePerson:function(e){return u.a.delete("".concat(s,"/").concat(e.id)).then((function(){return!0}))},updatePerson:function(e){return u.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))}},l=t(0);var f=function(e){var n=e.filter,t=e.onChange;return Object(l.jsxs)("div",{children:["filter shown with: ",Object(l.jsx)("input",{value:n,onChange:t})]})},j=t(7);var b=function(e){var n=e.persons,t=e.onSubmit,r=e.onUpdate,c=e.onClearError,i=Object(a.useState)(""),u=Object(o.a)(i,2),s=u[0],d=u[1],f=Object(a.useState)(""),b=Object(o.a)(f,2),h=b[0],m=b[1];return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=n.some((function(e){return e.name===s})),o=!1;if((c&&window.confirm("".concat(s," is already added to phonebook, replace the old number with the new one?"))||!c)&&(o=!0),o)if(d(""),m(""),c){var a=n.find((function(e){return e.name===s})),i=Object(j.a)(Object(j.a)({},a),{},{name:s,number:h});r(i)}else{t({name:s,number:h})}},children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:s,onChange:function(e){d(e.target.value),c()}})]}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:h,onChange:function(e){m(e.target.value),c()}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})};var h=function(e){var n=e.persons,t=e.filter,r=e.onDelete,c=n.filter((function(e){return e.name.includes(t)}));return Object(l.jsx)(l.Fragment,{children:c.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:(n=e,function(){window.confirm("Delete ".concat(n.name,"?"))&&r(n)}),children:"delete"})]},e.id);var n}))})};t(41);var m=function(e){var n=e.message;return n?Object(l.jsx)("div",{className:"error",children:n}):null},O=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),u=i[0],s=i[1],j=Object(a.useState)(""),O=Object(o.a)(j,2),p=O[0],v=O[1];Object(a.useEffect)((function(){d.getAll().then((function(e){r(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(m,{message:p}),Object(l.jsx)(f,{filter:u,onChange:function(e){return s(e.target.value)}}),Object(l.jsx)("h2",{children:"Add a new"}),Object(l.jsx)(b,{persons:t,onSubmit:function(e){d.createPerson(e).then((function(n){console.log("res",n),r(t.concat(n)),v("Added ".concat(e.name))})).catch((function(e){v(e.response.data.error)}))},onUpdate:function(e){d.updatePerson(e).then((function(n){r(t.map((function(e){return e.id!==n.id?e:n}))),v("Updated ".concat(e.name))})).catch((function(){alert("the person ".concat(e.name," was already deleted from server")),r(t.filter((function(n){return n.id!==e.id})))}))},onClearError:function(){return v("")}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(h,{filter:u,persons:t,onDelete:function(e){d.deletePerson(e).then((function(n){if(console.log("res",n),n){var c=t.filter((function(n){return n.id!==e.id}));r(c),v("Deleted ".concat(e.name))}else v("Information of ".concat(e.name," has already been removed from server"))})).catch((function(e){v(e.response.data.error)}))}})]})};c.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.459c8b4d.chunk.js.map